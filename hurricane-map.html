<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Hurricane Surf Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
<div id="map"></div>

<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoiZXhhbXBsZXVzZXIiLCJhIjoiY2t2b3Z4cGZxMDJ0cTJubzZ5Z3Z3Z2Z3dyJ9.abc123XYZ'; // Replace with your actual token

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [-80, 30],
    zoom: 4
  });

  map.on('load', () => {
    map.loadImage('images/hurricane.svg', (error, image) => {
      if (error) throw error;
      map.addImage('hurricane-icon', image);

      map.addSource('hurricanes', {
        type: 'geojson',
        data: 'surf-locations.geojson'
      });

      map.addLayer({
        id: 'hurricane-layer',
        type: 'symbol',
        source: 'hurricanes',
        layout: {
          'icon-image': 'hurricane-icon',
          'icon-size': [
            'interpolate',
            ['linear'],
            ['zoom'],
            4, 0.4,
            6, 0.6,
            8, 0.8,
            10, 1.2,
            12, 1.6
          ],
          'icon-allow-overlap': true
        }
      });

      map.on('click', 'hurricane-layer', (e) => {
        const props = e.features[0].properties;
        new mapboxgl.Popup()
          .setLngLat(e.lngLat)
          .setHTML(`
            <strong>${props.location}</strong><br>
            Hurricane ${props.hurricane} (${props.year})<br>
            Surf: ${props.surf}<br>
            ${props.notes}<br>
            <a href="${props.link}" target="_blank">More info</a>
          `)
          .addTo(map);
      });

      map.on('mouseenter', 'hurricane-layer', () => {
        map.getCanvas().style.cursor = 'pointer';
      });
      map.on('mouseleave', 'hurricane-layer', () => {
        map.getCanvas().style.cursor = '';
      });
    });
  });
</script>
</body>
</html>
