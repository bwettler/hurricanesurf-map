<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Hurricane Surf – Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"/>
<style>
  html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
  #map { height: 100%; width: 100%; }

  @keyframes spin { to { transform: rotate(360deg); } }
  .spin-inner {
    animation: spin 20s linear infinite;
    transform-origin: center center;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<script>
  const ICON_SIZE = 64;
  const hurricaneIcon = L.divIcon({
    className: '',
    html: `<div class="spin-inner">
             <img src="images/hurricane.svg" width="${ICON_SIZE}" height="${ICON_SIZE}">
           </div>`,
    iconSize: [ICON_SIZE, ICON_SIZE],
    iconAnchor: [ICON_SIZE / 2, ICON_SIZE / 2],
    popupAnchor: [0, -ICON_SIZE / 2]
  });

  const map = L.map('map').setView([30, -80], 5);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const data = [
    {
      lat: 27.2,
      lng: -114.3,
      location: "San Rafael, Baja California Sur",
      hurricane: "Kay",
      year: "2022",
      surf: "10–15ft",
      notes: "Category 1",
      link: "#"
    },
    {
      lat: 29.7,
      lng: -115.6,
      location: "San Fernando, Baja California",
      hurricane: "Hilary",
      year: "2023",
      surf: "12–18ft",
      notes: "Category 2",
      link: "#"
    }
  ];

  const markers = data.map(loc =>
    L.marker([loc.lat, loc.lng], { icon: hurricaneIcon })
      .bindPopup(
        `<strong>${loc.location}</strong><br>` +
        `${loc.hurricane} (${loc.year})<br>` +
        `${loc.surf}<br>` +
        `${loc.notes}<br>` +
        `<a href="${loc.link}" target="_blank">More info</a>`
      )
  );

  const group = L.featureGroup(markers).addTo(map);
  if (group.getBounds().isValid()) {
    map.fitBounds(group.getBounds(), { padding: [20, 20], maxZoom: 8 });
  }
</script>
</body>
</html>
